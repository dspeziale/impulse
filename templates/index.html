{% extends "base.html" %}

{% block content %}
<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0">Dashboard</h1>
            </div>
        </div>
    </div>
</div>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-6 col-6">
                <div class="small-box bg-info">
                    <div class="inner">
                        <h3>Database</h3>
                        <p>Status: {{ db_status }}</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-database"></i>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-6">
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3>Email Test</h3>
                        <p>Click to send test email</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <a href="#" class="small-box-footer" onclick="sendTestEmail()">Send <i
                            class="fas fa-arrow-circle-right"></i></a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    function sendTestEmail() {
        notifier.info('Sending email...', { durations: { info: 2000 } });
        fetch('/test-email')
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    notifier.success(data.message);
                } else {
                    notifier.alert(data.message);
                }
            })
            .catch(error => {
                notifier.alert('An error occurred: ' + error);
            });
    }
</script>
{% endblock %}